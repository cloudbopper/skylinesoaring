{% extends "base.html" %}
{% block content %}
<h2>Instruction Report for {{ student.full_display_name }} â€“ {{ report_date|date:"F j, Y" }}</h2>

<form method="post">
  {% csrf_token %}
  {{ report_form.media }}
  {{ formset.management_form }}
  {% for form in formset %}
  {{ form.non_field_errors }}
  {{ form.errors }}
  {% endfor %}

  <h4>Session Summary</h4>
  {{ report_form.report_text.label_tag }}
  {{ report_form.report_text }}

  <div class="form-check mt-3 mb-4">
    {{ report_form.simulator }} {{ report_form.simulator.label_tag }}
  </div>

  <h4 class="mt-5">Lesson Scores</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th style="width:10%">Code</th>
        <th style="width:30%">Title</th>
        <th style="width:15%">Score</th>
      </tr>
    </thead>
    <tbody>
      {% for form in formset %}
        <tr>
          <td>{{ form.instance.lesson.code }}</td>
          <td>{{ form.instance.lesson.title }}</td>
          <td>{{ form.score }} {{ form.lesson.as_hidden }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <button type="submit" class="btn btn-success">Save Instruction Report</button>
  <a href="{% url 'instructors:syllabus_overview' %}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
